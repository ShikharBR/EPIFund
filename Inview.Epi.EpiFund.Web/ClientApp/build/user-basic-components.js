!function(e){function t(t){for(var n,o,s=t[0],c=t[1],i=t[2],f=0,m=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);m.length;)m.shift()();return l.push.apply(l,i||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={12:0},l=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var u=c;l.push([1212,0]),a()}({1212:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),o=a.n(l),s=(a(584),a(8)),c=a(10),i=a(192);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,a,n,r,l,o){try{var s=e[l](o),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=y(e);if(t){var r=y(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return h(this,a)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=a(22),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(h,e);var t,a,n,l,o,u=p(h);function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var a=b(t=u.call(this,e));return t.state={isLoading:!0,currentUserProfile:{Contacts:[]},searchTerm:"",selectedContact:null},a.searchContact=a.searchContact.bind(b(t)),a.refresh=a.refresh.bind(b(t)),a.quickViewUser=a.quickViewUser.bind(b(t)),a.refresh(),t}return t=h,(a=[{key:"refresh",value:(l=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getCurrentUserInfoAndProfile(!0);case 2:(t=e.sent).Contacts.map((function(e){e.Hidden=!1})),this.setState({currentUserProfile:t,selectedContact:null,isLoading:!1},(function(){setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),500)}));case 5:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(a,n){var r=l.apply(e,t);function o(e){f(r,a,n,o,s,"next",e)}function s(e){f(r,a,n,o,s,"throw",e)}o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"searchContact",value:function(e){var t=this,a=this;this.setState({searchTerm:e.target.value},(function(){for(var e=t.state.currentUserProfile,n=0;n<e.Contacts.length;n++){var r=e.Contacts[n];r.FullName.toLowerCase().indexOf(a.state.searchTerm.toLowerCase())>-1||""==a.state.searchTerm.trim()?r.Hidden=!1:r.Hidden=!0}t.setState({currentUserProfile:e})}))}},{key:"quickViewUser",value:function(e){this.setState({selectedContact:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.isLoading?r.a.createElement(c.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h3",null,"My Contacts",r.a.createElement("button",{onClick:function(){v.publish("newMessageToCropAdmin")},className:"btn btn-primary pull-right"},r.a.createElement("i",{className:"fa fa-envelope"})," Contact Corp Admin")))),r.a.createElement("div",{className:"panel contacts-panel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"row wrapper"},r.a.createElement("div",{className:"col-sm-5 contacts-list"},r.a.createElement("div",{className:"list-wrapper"},r.a.createElement("div",{className:"form-group"},r.a.createElement("h4",null,"Quick search:"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Search",value:this.searchTerm,onChange:this.searchContact})),r.a.createElement("hr",null),r.a.createElement("ul",null,this.state.currentUserProfile.Contacts.map((function(t){if(!1===t.Hidden)return r.a.createElement("li",{key:t.UserId,className:"",onClick:function(){e.quickViewUser(t)}},r.a.createElement("div",{className:"col-xs-12 col-sm-4"},r.a.createElement("img",{src:t.ProfileImageUrl,className:"img-responsive img-rounded profile-image"})),r.a.createElement("div",{className:"col-xs-12 col-sm-8"},r.a.createElement("span",{className:"name"},t.FullName),r.a.createElement("hr",null),r.a.createElement("span",{className:"email",title:t.Username,"data-toggle":"tooltip","data-placement":"top"},r.a.createElement("i",{className:"fas fa-envelope"}))),r.a.createElement("div",{className:"clearfix"}))}))))),r.a.createElement("div",{className:"col-sm-7 contact-details"},null!=this.state.selectedContact&&r.a.createElement(i.a,{refreshList:this.refresh,selectedUserProfile:this.state.selectedContact}))))))))}}])&&m(t.prototype,a),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(n.Component),g=document.getElementById("user-contacts-app");function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=C(e);if(t){var r=C(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return k(this,a)}}function k(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}null!=g&&o.a.render(r.a.createElement(E,null),g);var T=a(22),j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(o,e);var t,a,n,l=P(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);O(t=l.call(this,e));return t}return t=o,(a=[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("div",{className:"profile-image"},r.a.createElement("img",{src:this.props.currentUser.ProfileImageUrl,className:"img-thumbnail"}))),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("table",{className:"table user-profile-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("h3",null,this.props.currentUser.FullName))),r.a.createElement("tr",null,r.a.createElement("td",null,"Position:"),r.a.createElement("td",null,r.a.createElement("h4",null,this.props.currentUser.JobTitle))),r.a.createElement("tr",null,r.a.createElement("td",null,"Phone #:"),r.a.createElement("td",null,r.a.createElement("h4",null,this.props.currentUser.Phone))),r.a.createElement("tr",null,r.a.createElement("td",null,"USCRE User Type:"),r.a.createElement("td",null,r.a.createElement("h4",null,this.props.currentUser.UserTypeDescription))),null!=this.props.currentUser.ServiceProviderType&&r.a.createElement("tr",null,r.a.createElement("td",null,"Service Provider Type / Industry:"),r.a.createElement("td",null,r.a.createElement("h4",null,this.props.currentUser.ServiceProviderTypeDescription))))))),r.a.createElement("hr",null),r.a.createElement("button",{onClick:function(){T.publish("newMessage")},className:"btn btn-primary margin-right10px"},r.a.createElement("i",{className:"fas fa-envelope"}),"  Compose a New Message"),r.a.createElement("a",{href:"/General/ManageUploads",className:"btn btn-info margin-right10px"},r.a.createElement("i",{className:"fas fa-folder"}),"  Manage Uploads"),r.a.createElement("a",{href:"/General/UserProfile",className:"btn btn-info margin-right10px"},r.a.createElement("i",{className:"fas fa-user-alt"}),"  Edit Profile"))))}}])&&w(t.prototype,a),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(n.Component),R=a(9),A=a(15);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t,a,n,r,l,o){try{var s=e[l](o),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function x(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function o(e){I(l,n,r,o,s,"next",e)}function s(e){I(l,n,r,o,s,"throw",e)}o(void 0)}))}}function L(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=B(e);if(t){var r=B(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _(this,a)}}function _(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=a(22),H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(u,e);var t,a,n,l,o,i=F(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);D(t=i.call(this,e));return t.state={isLoading:!0,recentMessages:[]},t.formatDate=t.formatDate.bind(D(t)),t.viewMessage=t.viewMessage.bind(D(t)),t.markAsRead=t.markAsRead.bind(D(t)),t.refresh=t.refresh.bind(D(t)),V.subscribe("updateMessages",(function(e,a){t.refresh()})),t}return t=u,(a=[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:(o=x(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).setState({isLoading:!0}),!0===A.a.isDataTable($(".message-table"))&&t.state.messageTable.destroy(),e.next=5,s.a.getCurrentUserMessages();case 5:a=e.sent,n=[],$.each(a,(function(e,t){0===t.MessageType&&n.push(t)})),t.setState({recentMessages:n},(function(){setTimeout((function(){var e=$(".message-table").DataTable({searching:!0,order:[[2,"desc"]]});t.setState({messageTable:e,isLoading:!1}),$('[data-toggle="tooltip"]').tooltip()}),500)}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"markAsRead",value:(l=x(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this,s.a.markMessageAsRead(t).then((function(){0==t.MessageType?R.a.info("Message marked as read"):R.a.info("Notification marked as read"),a.refresh()}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"viewMessage",value:function(e){V.publish("viewMessage",e)}},{key:"formatDate",value:function(e){return A.a.formatDateTime(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:this.state.isLoading?null:"hidden"},r.a.createElement(c.a,null)),r.a.createElement("div",{className:this.state.isLoading?"hidden":null},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},"Unread Messages")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("table",{className:"table table-bordered message-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"From"),r.a.createElement("th",{style:{width:"250px"}},"Subject"),r.a.createElement("th",null,"Received Time"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.recentMessages.map((function(t){return r.a.createElement("tr",{key:t.MessageId},r.a.createElement("td",null,t.FromUsername),r.a.createElement("td",null,t.Subject),r.a.createElement("td",null,e.formatDate(t.CreatedTime)),r.a.createElement("td",{className:"td-btn-group"},r.a.createElement("button",{title:"View message","data-toggle":"tooltip","data-placement":"top",onClick:function(){e.viewMessage(t)},className:"btn btn-primary"},r.a.createElement("i",{className:"far fa-eye"})),r.a.createElement("button",{title:"Mark as read","data-toggle":"tooltip","data-placement":"top",onClick:function(){e.markAsRead(t)},className:"btn btn-info"},r.a.createElement("i",{className:"fas fa-envelope-open"}))))})))))))))))}}])&&L(t.prototype,a),n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Component);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,a,n,r,l,o){try{var s=e[l](o),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function q(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function o(e){z(l,n,r,o,s,"next",e)}function s(e){z(l,n,r,o,s,"throw",e)}o(void 0)}))}}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Y(e);if(t){var r=Y(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return W(this,a)}}function W(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(u,e);var t,a,n,l,o,i=Q(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);K(t=i.call(this,e));return t.state={isLoading:!0,recentNotifications:[]},t.formatDate=t.formatDate.bind(K(t)),t.viewMessage=t.viewMessage.bind(K(t)),t.markAsRead=t.markAsRead.bind(K(t)),t.refresh=t.refresh.bind(K(t)),PubSub.subscribe("updateMessages",(function(e,a){t.refresh()})),t}return t=u,(a=[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:(o=q(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).setState({isLoading:!0}),!0===A.a.isDataTable($(".recent-notification-table"))&&t.state.notificationTable.destroy(),e.next=5,s.a.getCurrentUserMessages();case 5:a=e.sent,n=[],$.each(a,(function(e,t){0!=t.MessageType&&n.push(t)})),t.setState({recentNotifications:n},(function(){setTimeout((function(){var e=$(".recent-notification-table").DataTable({searching:!0,order:[[2,"desc"]]});t.setState({notificationTable:e,isLoading:!1}),$('[data-toggle="tooltip"]').tooltip()}),500)}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"markAsRead",value:(l=q(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this,s.a.markMessageAsRead(t).then((function(){0==t.MessageType?R.a.info("Message marked as read"):R.a.info("Notification marked as read"),a.refresh()}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"viewMessage",value:function(e){PubSub.publish("viewMessage",e)}},{key:"formatDate",value:function(e){return A.a.formatDateTime(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:this.state.isLoading?null:"hidden"},r.a.createElement(c.a,null)),r.a.createElement("div",{className:this.state.isLoading?"hidden":null},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},"Recent Notifications")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("table",{className:"table table-bordered recent-notification-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"From"),r.a.createElement("th",{style:{width:"250px"}},"Subject"),r.a.createElement("th",null,"Received Time"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.recentNotifications.map((function(t){return r.a.createElement("tr",{key:t.MessageId},r.a.createElement("td",null,t.FromUsername),r.a.createElement("td",null,t.Subject),r.a.createElement("td",null,e.formatDate(t.CreatedTime)),r.a.createElement("td",{className:"td-btn-group"},r.a.createElement("button",{title:"View notification","data-toggle":"tooltip","data-placement":"top",onClick:function(){e.viewMessage(t)},className:"btn btn-primary"},r.a.createElement("i",{className:"far fa-eye"})),r.a.createElement("button",{title:"Mark as read","data-toggle":"tooltip","data-placement":"top",onClick:function(){e.markAsRead(t)},className:"btn btn-info"},r.a.createElement("i",{className:"fas fa-envelope-open"}))))})))))))))))}}])&&G(t.prototype,a),n&&G(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Component);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t,a,n,r,l,o){try{var s=e[l](o),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function ae(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=se(e);if(t){var r=se(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return le(this,a)}}function le(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(u,e);var t,a,n,l,o,i=re(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);oe(t=i.call(this,e));return t.refresh(),t.state={isLoading:!0},t}return t=u,(a=[{key:"refresh",value:(l=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,s.a.getCurrentUserInfoAndProfile(!0);case 3:(t=e.sent).Contacts.map((function(e){e.Hidden=!1})),this.setState({currentUserProfile:t,isLoading:!1});case 6:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(a,n){var r=l.apply(e,t);function o(e){te(r,a,n,o,s,"next",e)}function s(e){te(r,a,n,o,s,"throw",e)}o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"componentDidMount",value:function(){setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),500)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.isLoading?r.a.createElement(c.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{currentUser:this.state.currentUserProfile}),r.a.createElement(H,null),r.a.createElement(X,null)))}}])&&ae(t.prototype,a),n&&ae(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Component),ie=document.getElementById("general-communicationcenter-app");function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t,a,n,r,l,o){try{var s=e[l](o),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function me(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ye(e);if(t){var r=ye(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return he(this,a)}}function he(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return be(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}null!=ie&&o.a.render(r.a.createElement(ce,null),ie);var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(u,e);var t,a,n,l,o,i=pe(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);be(t=i.call(this,e));return t.state={isLoading:!0,LicenseState:null,currentImageData:null,LicenseStates:[],availableServiceProviderTypes:[],availableStates:[],availableAssetTypes:[]},t.refresh(),t.save=t.save.bind(be(t)),t.onChange=t.onChange.bind(be(t)),t.onLicenseStateChange=t.onLicenseStateChange.bind(be(t)),t.checkAllStates=t.checkAllStates.bind(be(t)),t.checkAllTypes=t.checkAllTypes.bind(be(t)),t}return t=u,(a=[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){$("#fileupload").fileupload({url:"/epis3/UpdateProfileImage",autoUpload:!1,singleFileUploads:!0,add:function(t,a){e.setState({currentImageData:a});var n=URL.createObjectURL(event.target.files[0]),r=e.state.currentUserProfile;r.ProfileImageUrl=n,e.setState({currentUserProfile:r}),R.a.info("Please click save changes to update profile.")},done:function(e,t){}})}),500)}},{key:"refresh",value:(l=regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,s.a.getCurrentUserInfoAndProfile(!0);case 3:null==(a=e.sent).LicenseState&&(a.LicenseState="Select a state"),this.setState({currentUserProfile:a,isLoading:!1,LicenseState:a.LicenseState}),s.a.getAvailableServiceProviderTypes().then((function(e){$.each(e,(function(e,a){t.state.availableServiceProviderTypes.push({name:a,isSelected:!0})}))})),s.a.getAvailableStates().then((function(e){t.setState({LicenseStates:e});var a=!1;t.state.currentUserProfile.IsAllAvailableLocationsChecked&&(a=!0);var n=[];$.each(e,(function(e,r){if(a)n.push({name:r,isSelected:!0});else{var l=t.state.currentUserProfile.AvailableLocations.filter((function(e,t){if(e.State==r.toUpperCase())return e}))[0];n.push({name:r,isSelected:null!=l})}})),t.setState({availableStates:n})})),s.a.getAvailableAssetTypes().then((function(e){var a=!1;t.state.currentUserProfile.IsAllAvailableAssetTypesChecked&&(a=!0);var n=[];$.each(e,(function(e,r){if(a)n.push({name:r,isSelected:!0});else{var l=t.state.currentUserProfile.AvailableAssetTypes.filter((function(e,t){if(e.AssetTypeDescription==r)return n}))[0];n.push({name:r,isSelected:null!=l})}})),t.setState({availableAssetTypes:n})})),setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),500);case 10:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(a,n){var r=l.apply(e,t);function o(e){fe(r,a,n,o,s,"next",e)}function s(e){fe(r,a,n,o,s,"throw",e)}o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"save",value:function(){null!=this.state.currentImageData&&this.state.currentImageData.submit();var e=this.state.availableStates.filter((function(e,t){if(1==e.isSelected)return e})).map((function(e,t){return e.name})),t=this.state.availableAssetTypes.filter((function(e,t){if(1==e.isSelected)return e})).map((function(e,t){return e.name}));e.length==this.state.availableStates.length?this.state.currentUserProfile.IsAllAvailableLocationsChecked=!0:this.state.currentUserProfile.IsAllAvailableLocationsChecked=!1,t.length==this.state.availableAssetTypes.length?this.state.currentUserProfile.IsAllAvailableAssetTypesChecked=!0:this.state.currentUserProfile.IsAllAvailableAssetTypesChecked=!1,s.a.saveUserProfile(this.state.currentUserProfile,e,t).then((function(){R.a.info("User profile updated")}))}},{key:"checkAllStates",value:function(e){this.state.availableStates.forEach((function(t,a){t.isSelected=e})),this.setState({availableStates:this.state.availableStates})}},{key:"checkAllTypes",value:function(e){this.state.availableAssetTypes.forEach((function(t,a){t.isSelected=e})),this.setState({availableAssetTypes:this.state.availableAssetTypes})}},{key:"onLicenseStateChange",value:function(){null==event.target.name&&console.warn("Event input without name");var e=this.state.currentUserProfile;e[event.target.name]=event.target.value,this.setState({currentUserProfile:e,LicenseState:event.target.value})}},{key:"onChange",value:function(){null==event.target.name&&console.warn("Event input without name");var e=this.state.currentUserProfile;e[event.target.name]=event.target.value,this.setState({currentUserProfile:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.isLoading?r.a.createElement(c.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"profile-image"},r.a.createElement("img",{src:this.state.currentUserProfile.ProfileImageUrl,alt:"",className:"img-thumbnail"})),r.a.createElement("hr",null),r.a.createElement("span",{className:"btn btn-primary fileinput-button btn-block"},r.a.createElement("i",{className:"fas fa-image"})," ",r.a.createElement("span",null,"Upload Profile Image"),r.a.createElement("input",{id:"fileupload",type:"file",name:"files[]"})),r.a.createElement("button",{id:"uploadBtn",className:"hidden"})),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("h3",null,this.state.currentUserProfile.FullName),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Job TItle"),r.a.createElement("input",{className:"form-control",placeholder:"Job Title",name:"JobTitle",onChange:this.onChange,value:this.state.currentUserProfile.JobTitle||""})),r.a.createElement("hr",null),r.a.createElement("h4",null,"Public Contact Info"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Phone Number"),r.a.createElement("input",{className:"form-control",placeholder:"Phone #",name:"Phone",onChange:this.onChange,value:this.state.currentUserProfile.Phone||""})))))))),r.a.createElement("div",{className:"row social-media"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h4",null,"Social Media"),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-1"},r.a.createElement("i",{className:"fab fa-linkedin"}),r.a.createElement("i",{className:"fab fa-twitter"}),r.a.createElement("i",{className:"fab fa-facebook"}),r.a.createElement("i",{className:"fab fa-instagram"})),r.a.createElement("div",{className:"col-sm-11"},r.a.createElement("input",{className:"form-control",placeholder:"http://",name:"LinkedIn",onChange:this.onChange,value:this.state.currentUserProfile.LinkedIn||""}),r.a.createElement("input",{className:"form-control",placeholder:"http://",name:"Twiiter",onChange:this.onChange,value:this.state.currentUserProfile.Twiiter||""}),r.a.createElement("input",{className:"form-control",placeholder:"http://",name:"Facebook",onChange:this.onChange,value:this.state.currentUserProfile.Facebook||""}),r.a.createElement("input",{className:"form-control",placeholder:"http://",name:"Instagram",onChange:this.onChange,value:this.state.currentUserProfile.Instagram||""})))))),14===this.state.currentUserProfile.User.UserType&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("p",null,"Available Business Locations and Asset Types"),r.a.createElement("div",{className:"panel-group default-accordion",id:"search-sp-accordion",role:"tablist","aria-multiselectable":"true"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h4",{className:"panel-title"},r.a.createElement("a",{className:"collapsed",role:"button","data-toggle":"collapse","data-parent":"#search-sp-accordion","data-target":"#locations"},"Available Business Locations"))),r.a.createElement("div",{id:"locations",className:"panel-collapse collapse"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("button",{className:"btn btn-default",onClick:function(){e.checkAllStates(!0)}},r.a.createElement("i",{className:"fas fa-check-square"})," Check all"),r.a.createElement("button",{className:"btn btn-default",onClick:function(){e.checkAllStates(!1)}},r.a.createElement("i",{className:"fas fa-ban"})," Uncheck all"),r.a.createElement("hr",null),this.state.availableStates.map((function(t,a){return r.a.createElement("div",{key:a,className:"custom-checkbox",style:{float:"left",minWidth:"180px"}},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:t.isSelected,onChange:function(){t.isSelected=!t.isSelected,e.setState({availableStates:e.state.availableStates})}})," ",r.a.createElement("span",{className:"label-text"},t.name)))}))))),r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h4",{className:"panel-title"},r.a.createElement("a",{className:"collapsed",role:"button","data-toggle":"collapse","data-parent":"#search-sp-accordion","data-target":"#assetTypes"},"Available Business Asset Types"))),r.a.createElement("div",{id:"assetTypes",className:"panel-collapse collapse"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("button",{className:"btn btn-default",onClick:function(){e.checkAllTypes(!0)}},r.a.createElement("i",{className:"fas fa-check-square"})," Check all"),r.a.createElement("button",{className:"btn btn-default",onClick:function(){e.checkAllTypes(!1)}},r.a.createElement("i",{className:"fas fa-ban"})," Uncheck all"),r.a.createElement("hr",null),this.state.availableAssetTypes.map((function(t,a){return r.a.createElement("div",{key:a,className:"custom-checkbox",style:{float:"left",minWidth:"290px"}},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:t.isSelected,onChange:function(){t.isSelected=!t.isSelected,e.setState({availableAssetTypes:e.state.availableAssetTypes})}})," ",r.a.createElement("span",{className:"label-text"},t.name)))})))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h4",null,"Biography"),r.a.createElement("textarea",{rows:"10",className:"form-control",name:"Biography",onChange:this.onChange,value:this.state.currentUserProfile.Biography||""}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h4",null,"Specialized Skills"),r.a.createElement("textarea",{rows:"10",className:"form-control",name:"Skills",onChange:this.onChange,value:this.state.currentUserProfile.Skills||""}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h4",null,"License")),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("label",null,"Operating License Number"),r.a.createElement("input",{className:"form-control",name:"LicenseNumber",onChange:this.onChange,value:this.state.currentUserProfile.LicenseNumber||""})),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",null,"Operating License State"),r.a.createElement("select",{className:"form-control",name:"LicenseState",onChange:this.onLicenseStateChange,value:this.state.LicenseState},r.a.createElement("option",null,"Select a state"),this.state.LicenseStates.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("label",null,"Operating License Description"),r.a.createElement("textarea",{className:"form-control",rows:"10",name:"LicenseDescription",onChange:this.onChange,value:this.state.currentUserProfile.LicenseDescription||""})),r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("label",null,"Professional Organization Members"),r.a.createElement("textarea",{className:"form-control",rows:"10",name:"ProfessionalOrganizationMembers",onChange:this.onChange,value:this.state.currentUserProfile.ProfessionalOrganizationMembers||""})),r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("label",null,"Client Relationships"),r.a.createElement("textarea",{className:"form-control",rows:"10",name:"ClientRelationships",onChange:this.onChange,value:this.state.currentUserProfile.ClientRelationships||""}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("a",{href:"/Home/MyUSCPage",className:"btn btn-default pull-right"},"Cancel"),r.a.createElement("button",{className:"btn btn-primary pull-right margin-right10px",onClick:this.save},"Save Changes")))))))}}])&&me(t.prototype,a),n&&me(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Component),Ee=document.getElementById("general-user-profile-app");null!=Ee&&o.a.render(r.a.createElement(ve,null),Ee);var ge=a(193);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t,a,n,r,l,o){try{var s=e[l](o),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function Se(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Te(e);if(t){var r=Te(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Oe(this,a)}}function Oe(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ce(e)}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=a(574),Re=a(22),Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(u,e);var t,a,n,l,o,i=ke(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);Ce(t=i.call(this,e));return t.state={isLoading:!0,orderedSubFolderOrFiles:[]},t.refresh=t.refresh.bind(Ce(t)),t.setDropZones=t.setDropZones.bind(Ce(t)),Re.subscribe("newFilesUploaded",(function(e,a){var n=Ce(t);if(null==a[0])R.a.error("Failed to upload or you don't have the permission to upload.");else if(null!=a&&a.length>0){$.each(a,(function(e,t){var a=$(n.state.epiS3Object.SubFolderOrFiles).filter((function(e,a){return a.EpiS3ObjectId==t.EpiS3ObjectId}));1==a.length?a[0].LastModifiedTime=t.LastModifiedTime:0==a.length&&n.state.epiS3Object.SubFolderOrFiles.push(t)}));var r=je.orderBy(n.state.epiS3Object.SubFolderOrFiles,["IsFolder","Name"],["desc","asc"]);n.setState({orderedSubFolderOrFiles:r}),1==a.length?R.a.info("File uploaded."):R.a.info("Files uploaded.")}})),t}return t=u,(a=[{key:"refresh",value:(l=regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,e.next=3,s.a.getCurrentUserInfoAndProfile();case 3:e.sent,s.a.getUserFolder(t).then((function(e){setTimeout((function(){var t="";t=null==e.Name?"Home":e.Name,$.each(e.SubFolderOrFiles,(function(e,t){t.IsActive=!1}));var n=je.orderBy(e.SubFolderOrFiles,["IsFolder","Name"],["desc","asc"]);a.setState({currentFolderName:t,currentFolderS3ObjectId:e.EpiS3ObjectId,epiS3Object:e,orderedSubFolderOrFiles:n,isLoading:!1,folderExists:!0}),setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),500),a.setDropZones(a.state.currentFolderS3ObjectId)}),1e3)})).fail((function(){a.setState({isLoading:!1,folderExists:!1})}));case 5:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(a,n){var r=l.apply(e,t);function o(e){we(r,a,n,o,s,"next",e)}function s(e){we(r,a,n,o,s,"throw",e)}o(void 0)}))},function(e){return o.apply(this,arguments)})},{key:"componentDidMount",value:function(){var e=s.a.getParameterByName("eid");null==e?this.refresh(null):this.refresh(e),$("html, body").animate({scrollTop:0},"fast"),$(document).bind("drop dragover",(function(e){e.preventDefault()})),$(document).bind("dragover",(function(e){var t=$(".main-dropzone"),a=window.dropZoneTimeout;a?clearTimeout(a):t.addClass("in");var n=$(e.target).closest(t);t.not(n).removeClass("hover"),n.addClass("hover"),window.dropZoneTimeout=setTimeout((function(){window.dropZoneTimeout=null,t.removeClass("in hover")}),100)})),setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),500)}},{key:"setDropZones",value:function(e){$("#fileupload").fileupload({url:"/epis3/UploadFiles",singleFileUploads:!1,dropZone:$(".main-dropzone"),formData:{folderId:e},autoUpload:!0,beforeSend:function(){R.a.info("Uploading...")},done:function(e,t){},fail:function(e,t){console.log(t)}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled")}},{key:"noPermissionTodownloadFile",value:function(e){R.a.error("You don't have the permssion to download.")}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.isLoading?r.a.createElement(c.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(ge.IntraSiteCommunicationComponent,null),r.a.createElement("h3",null,"Document Center"),r.a.createElement("div",{className:"row"},!this.state.isLoading&&!this.state.folderExists&&r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"alert alert-danger"},"Folder doesn't exist or you don't have the permission to access.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{href:"/General/ManageUploads",className:"btn btn-primary"},r.a.createElement("i",{className:"fas fa-arrow-circle-left"})," Back to my home folder")),r.a.createElement("hr",null)),!this.state.isLoading&&this.state.folderExists&&r.a.createElement("div",null,r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"col-sm-12 main-dropzone dropzone fade"},r.a.createElement("h3",null,this.state.currentFolderName),r.a.createElement("table",{className:"table manage-table"},r.a.createElement("tbody",null,this.state.orderedSubFolderOrFiles.map((function(t,a){return r.a.createElement("tr",{key:a,className:"manage-table-item",onMouseOver:function(){t.IsActive=!0,e.setState({orderedSubFolderOrFiles:e.state.orderedSubFolderOrFiles})},onMouseLeave:function(){t.IsActive=!1,e.setState({orderedSubFolderOrFiles:e.state.orderedSubFolderOrFiles})}},r.a.createElement("td",{className:"file-icon"},t.IsFolder&&r.a.createElement("a",{href:"/General/ManageUploads?eid="+t.EpiS3ObjectId},r.a.createElement("div",{className:"folder"},r.a.createElement("i",{className:"fas fa-folder"}))),t.IsFile&&t.CanDownload&&r.a.createElement("a",{target:"_blank",href:"/epis3/downloadFileById?eid="+t.EpiS3ObjectId},r.a.createElement("div",{className:"file"},r.a.createElement("i",{className:"far fa-file"}))),t.IsFile&&!t.CanDownload&&r.a.createElement("div",{onClick:function(){e.noPermissionTodownloadFile(t)}},r.a.createElement("div",{className:"file"},r.a.createElement("i",{className:"far fa-file"})))),r.a.createElement("td",{className:"name"},t.IsFolder&&r.a.createElement("a",{href:"/General/ManageUploads?eid="+t.EpiS3ObjectId},r.a.createElement("div",null,t.Name)),t.IsFile&&t.CanDownload&&r.a.createElement("a",{target:"_blank",href:"/epis3/downloadFileById?eid="+t.EpiS3ObjectId},r.a.createElement("div",null,t.Name)),t.IsFile&&!t.CanDownload&&r.a.createElement("div",{onClick:function(){e.noPermissionTodownloadFile(t)}},t.Name)),r.a.createElement("td",{className:"action"},t.IsActive&&r.a.createElement("div",null,r.a.createElement("button",{title:"Delete","data-toggle":"tooltip","data-placement":"right",className:"pull-right btn btn-sm btn-danger margin-right10px"},r.a.createElement("i",{className:"far fa-trash-alt"})),r.a.createElement("button",{title:"View Info","data-toggle":"tooltip","data-placement":"left",className:"pull-right btn btn-sm margin-right10px"},r.a.createElement("i",{className:"fas fa-info-circle"})))))})))))),r.a.createElement("div",{className:"col-sm-3 actions"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"search in this folder",disabled:!0}),r.a.createElement("button",{disabled:!0,title:"Search","data-toggle":"tooltip","data-placement":"top",className:"disabled btn btn-primary btn-block"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("hr",null)),r.a.createElement("button",{title:"Create Folder","data-toggle":"tooltip","data-placement":"top",className:"btn btn-default btn-block"},r.a.createElement("i",{className:"fas fa-folder-plus"})))))),r.a.createElement("div",{className:"row hidden"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("input",{id:"fileupload",type:"file",name:"currentFolderS3ObjectId",multiple:!0}),r.a.createElement("div",{id:"progress",className:"progress"},r.a.createElement("div",{className:"progress-bar progress-bar-success"})),r.a.createElement("div",{id:"files",className:"files"}))))))}}])&&Se(t.prototype,a),n&&Se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Component),Ue=document.getElementById("service-provider-manage-upload-app");function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t,a,n,r,l,o){try{var s=e[l](o),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function Le(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Be(e);if(t){var r=Be(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _e(this,a)}}function _e(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return De(e)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}null!=Ue&&o.a.render(r.a.createElement(Ae,null),Ue);var $e=a(22),Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(u,e);var t,a,n,l,o,i=Fe(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);De(t=i.call(this,e));return t.state={isLoading:!0,copiedLink:!1,referrals:[],referralCode:"",referralTable:null},t.copyLink=t.copyLink.bind(De(t)),t}return t=u,(a=[{key:"componentDidMount",value:function(){var e=this;this.refresh(),$e.subscribe("refreshReferralTrackingPage",(function(t,a){e.refresh()}))}},{key:"formatDate",value:function(e){return A.a.formatDateTime(e)}},{key:"copyLink",value:function(){var e=document.createElement("textarea");e.value=this.state.referralCode,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.setState({copiedLink:!0})}},{key:"refresh",value:(l=regeneratorRuntime.mark((function e(){var t,a,n,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).setState({isLoading:!0}),e.next=4,s.a.getCurrentUserInfoAndProfile(!0);case 4:return a=e.sent,e.next=7,s.a.getUserQuickReferralLink();case 7:return n=e.sent,r=window.location.origin+"/Referral/SignUp?referralCode="+n.ReferralCode,this.setState({currentUserProfile:a,referralCode:r}),null!=t.state.referralTable&&t.state.referralTable.destroy(),e.next=13,s.a.getUserReferrals();case 13:l=e.sent,t.setState({referrals:l}),setTimeout((function(){t.state.referralTable=$(".referral-table").DataTable({ordering:!1}),t.setState({isLoading:!1})}),1500),setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}),500);case 17:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(a,n){var r=l.apply(e,t);function o(e){xe(r,a,n,o,s,"next",e)}function s(e){xe(r,a,n,o,s,"throw",e)}o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,this.state.isLoading&&null==this.state.currentUserProfile?r.a.createElement("div",null,r.a.createElement(c.a,null)):14===this.state.currentUserProfile.User.UserType&&!1===this.state.currentUserProfile.IsServiceProviderSubmittedJVAgreement?r.a.createElement("div",null,r.a.createElement("h3",null,"Referral Tracking"),r.a.createElement("div",{className:"alert alert-info"},"Please sign up for the ",r.a.createElement("a",{href:"/Home/JointVentureMarketing"},"JOINT VENTURE MARKETING PROGRAM")," before sending referrals.")):r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){$e.publish("openReferralModal")},className:"btn btn-primary pull-right"},r.a.createElement("i",{className:"far fa-share-square"})," Send a new invitation"),r.a.createElement("h3",null,"Referral Tracking"),r.a.createElement("div",{className:"alert alert-success"},"Share you referral link:",r.a.createElement("div",{className:"input-group",onClick:this.copyLink},r.a.createElement("input",{type:"text",className:"form-control",value:this.state.referralCode,disabled:!0,style:{cursor:"pointer"}}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{className:"btn btn-primary",type:"button"},r.a.createElement("i",{className:"fas fa-link"})," Copy Link"))),this.state.copiedLink&&r.a.createElement("div",{className:"alert alert-success",style:{marginBottom:"0px"}},"Copied link!")),r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h4",{className:"sp-h4"},"Referrals"),r.a.createElement("hr",null),this.state.isLoading&&r.a.createElement(c.a,null),r.a.createElement("div",{className:this.state.isLoading?"hidden":null},r.a.createElement("table",{className:"table table-bordered referral-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Name / Email"),r.a.createElement("th",null,"Last Updated Time"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.referrals.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,1===t.ReferralType&&r.a.createElement("p",null,"Quick Link"),2===t.ReferralType&&r.a.createElement("p",null,"Custom Invitation")),r.a.createElement("td",null,null==t.ReferredUserId?r.a.createElement("p",null,t.ReferralEmail):r.a.createElement("p",null,t.ReferredUserFullName," ",r.a.createElement("br",null)," ",r.a.createElement("b",null,t.ReferredUsername))),r.a.createElement("td",null,e.formatDate(t.LastUpdateTime)),r.a.createElement("td",null,0===t.ReferralStatus&&r.a.createElement("p",{className:"status"},r.a.createElement("label",{className:"label label-default"},"Created")),1===t.ReferralStatus&&r.a.createElement("p",{className:"status"},r.a.createElement("label",{className:"label label-info"},"Invitation Sent")),(2===t.ReferralStatus||3==t.ReferralStatus)&&r.a.createElement("p",{className:"status"},r.a.createElement("label",{className:"label label-success"},"Registered"))),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){$e.publish("openReferralInfoModal",t)}},r.a.createElement("i",{className:"fas fa-info-circle"}))))})))))))))))}}])&&Le(t.prototype,a),n&&Le(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Component),He=document.getElementById("user-referral-tracking-app");null!=He&&o.a.render(r.a.createElement(Ve,null),He);var Je=a(25),ze=a.n(Je);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t,a,n,r,l,o){try{var s=e[l](o),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function Ze(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Xe(e);if(t){var r=Xe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ke(this,a)}}function Ke(e,t){if(t&&("object"===qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ye(e)}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a(22);var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(u,e);var t,a,n,l,o,i=We(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);Ye(t=i.call(this,e));return t.state={isLoading:!0,assetTypes:[{selectedAssetId:null,id:"1",name:"Retail",assets:[]},{selectedAssetId:null,id:"2",name:"Office",assets:[]},{selectedAssetId:null,id:"7",name:"Medical",assets:[]},{selectedAssetId:null,id:"6",name:"Fuel/Service",assets:[]},{selectedAssetId:null,id:"4",name:"Industrial",assets:[]},{selectedAssetId:null,id:"3",name:"MF",assets:[]},{selectedAssetId:null,id:"5",name:"MHP",assets:[]},{selectedAssetId:null,id:"11",name:"Hotel/Motel",assets:[]},{selectedAssetId:null,id:"8",name:"Mixed",assets:[]},{selectedAssetId:null,id:"14",name:"Mini",assets:[]},{selectedAssetId:null,id:"15",name:"Parking Garage",assets:[]},{selectedAssetId:null,id:"13",name:"Fractured Condos",assets:[]},{selectedAssetId:null,id:"17",name:"Land",assets:[]},{selectedAssetId:null,id:"16",name:"Notes",assets:[]}]},t.afterOpenModal=t.afterOpenModal.bind(Ye(t)),t.closeModal=t.closeModal.bind(Ye(t)),t.save=t.save.bind(Ye(t)),t}return t=u,(a=[{key:"refresh",value:(l=regeneratorRuntime.mark((function e(){var t,a,n,r,l,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this,a=0;a<t.state.assetTypes.length;a++)n=t.state.assetTypes[a],r={AssetId:0,AssetNumber:" -- ",ProjectName:"Please select an asset - --"},n.selectedAssetId=r.AssetId,n.assets=[],n.assets.push(r);return e.next=4,s.a.getManageSampleAssetData();case 4:if(null!=(l=e.sent)){for(a=0;a<l.length;a++)o=l[a],c=t.state.assetTypes.filter((function(e,t){if(e.id==o.AssetType)return!0}))[0],1==o.IsPaper&&(c=t.state.assetTypes.filter((function(e,t){if("16"==e.id)return!0}))[0]),null!=c&&(c.assets.push(o),1==o.IsSampleAsset&&(c.selectedAssetId=o.AssetId));t.setState({isLoading:!1,assetTypes:t.state.assetTypes})}case 6:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(a,n){var r=l.apply(e,t);function o(e){Ge(r,a,n,o,s,"next",e)}function s(e){Ge(r,a,n,o,s,"throw",e)}o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"afterOpenModal",value:function(){this.refresh()}},{key:"closeModal",value:function(){this.setState({isOpen:!1,isLoading:!0})}},{key:"save",value:function(){for(var e=[],t=0;t<this.state.assetTypes.length;t++){var a=$.extend({},this.state.assetTypes[t]);a.assets=[],null!=a.selectedAssetId&&0!=a.selectedAssetId||(a.selectedAssetId=null),e.push(a)}s.a.saveManageSampleAssetData(e).then((function(e){R.a.info("Updated sample asset(s).")}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{id:"setSampleAssetsButton",onClick:function(){e.setState({isOpen:!0})},className:"btn btn-primary btn-block"},"Set Sample Assets"),r.a.createElement(ze.a,{isOpen:this.state.isOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.closeModal,shouldCloseOnOverlayClick:!0,overlayClassName:"modal-mask",className:"modal-wrapper",closeTimeoutMS:200},r.a.createElement("div",{className:"modal-container modal-70"},r.a.createElement("div",{className:"modal-body"},this.state.isLoading?r.a.createElement(c.a,null):r.a.createElement("div",null,this.state.assetTypes.map((function(t,a){return r.a.createElement("div",{key:a,className:"row",style:{marginBottom:"10px"}},r.a.createElement("div",{className:"col-md-3 col-lg-2"},t.name),r.a.createElement("div",{className:"col-md-6 col-lg-7"},r.a.createElement("select",{className:"form-control",value:t.selectedAssetId,onChange:function(a){t.selectedAssetId=a.target.value,e.setState({assetTypes:e.state.assetTypes})}},t.assets.map((function(e,t){return r.a.createElement("option",{key:t,onChange:function(){},value:e.AssetId},e.AssetNumber," - ",e.ProjectName)})))),0!==t.selectedAssetId?r.a.createElement("div",{className:"col-md-3 col-lg-3"},r.a.createElement("a",{target:"_blank",href:"/DataPortal/ViewAsset/"+t.selectedAssetId+"?fromManageAssets=True",className:"btn btn-primary pull-left"},"View Asset"),r.a.createElement("button",{className:"btn",onClick:function(){t.selectedAssetId=0,e.setState({assetTypes:e.state.assetTypes})}},r.a.createElement("span",{className:"glyphicon glyphicon-trash"}))):r.a.createElement("div",{className:"col-md-3 col-lg-3 disabled","v-if":"asset.selectedAssetId == 0"},r.a.createElement("button",{disabled:!0,className:"btn btn-primary pull-left disabled"},"View Asset"),r.a.createElement("button",{disabled:!0,className:"btn disabled",onClick:function(){e.reset(t)}},r.a.createElement("span",{className:"glyphicon glyphicon-trash"}))))})))),r.a.createElement("div",{className:"modal-footer"},!this.state.isLoading&&r.a.createElement("button",{onClick:this.save,className:"btn btn-success"},"Save changes"),r.a.createElement("button",{onClick:this.closeModal,className:"btn"},"Cancel")))))}}])&&Ze(t.prototype,a),n&&Ze(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Component),tt=document.getElementById("set-sample-asset-button");null!=tt&&o.a.render(r.a.createElement(et,null),tt)}});